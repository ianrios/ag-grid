/**
          * @ag-grid-community/client-side-row-model - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.0
          * @link https://www.ag-grid.com/
          * @license MIT
          */
/**
          * @ag-grid-community/client-side-row-model - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.0
          * @link https://www.ag-grid.com/
          * @license MIT
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,o=require("@ag-grid-community/core"),r=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,i,n=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}return s},i=function(e,t,o){if(o||2===arguments.length)for(var r,i=0,n=t.length;i<n;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},n=function(){function e(t,o,r,i,n,s){this.nextId=0,this.allNodesMap={},this.dataLoaded=!1,this.rootNode=t,this.gridOptionsService=o,this.eventService=r,this.columnModel=i,this.beans=s,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=e.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}return e.prototype.getCopyOfNodesMap=function(){return o._.cloneObject(this.allNodesMap)},e.prototype.getRowNode=function(e){return this.allNodesMap[e]},e.prototype.setRowData=function(t){var o=this;if("string"!=typeof t){this.dataLoaded=!0,this.dispatchRowDataUpdateStartedEvent(t);var r=this.rootNode,i=this.rootNode.sibling;r.childrenAfterFilter=null,r.childrenAfterGroup=null,r.childrenAfterAggFilter=null,r.childrenAfterSort=null,r.childrenMapped=null,r.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?r.allLeafChildren=t.map((function(t){return o.createNode(t,o.rootNode,e.TOP_LEVEL)})):(r.allLeafChildren=[],r.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=r.childrenAfterFilter,i.childrenAfterGroup=r.childrenAfterGroup,i.childrenAfterAggFilter=r.childrenAfterAggFilter,i.childrenAfterSort=r.childrenAfterSort,i.childrenMapped=r.childrenMapped,i.allLeafChildren=r.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},e.prototype.updateRowData=function(e,t){this.dataLoaded=!0,this.dispatchRowDataUpdateStartedEvent(e.add);var r={remove:[],update:[],add:[]},i=[];return this.executeRemove(e,r,i),this.executeUpdate(e,r,i),this.executeAdd(e,r),this.updateSelection(i,"rowDataChanged"),t&&o._.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),r},e.prototype.hasData=function(){return this.dataLoaded},e.prototype.dispatchRowDataUpdateStartedEvent=function(e){var t={type:o.Events.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:(null==e?void 0:e.length)?e[0]:null};this.eventService.dispatchEvent(t)},e.prototype.updateSelection=function(e,t){var r=e.length>0;if(r&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),r){var i={type:o.Events.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(i)}},e.prototype.executeAdd=function(t,n){var s,a=this,l=t.add,d=t.addIndex;if(!o._.missingOrEmpty(l)){var p=l.map((function(t){return a.createNode(t,a.rootNode,e.TOP_LEVEL)}));if("number"==typeof d&&d>=0){var c=this.rootNode.allLeafChildren,h=c.length,u=d;if(this.gridOptionsService.get("treeData")&&d>0&&h>0)for(var f=0;f<h;f++)if((null===(s=c[f])||void 0===s?void 0:s.rowIndex)==d-1){u=f+1;break}var g=c.slice(0,u),v=c.slice(u,c.length);this.rootNode.allLeafChildren=i(i(i([],r(g),!1),r(p),!1),r(v),!1)}else this.rootNode.allLeafChildren=i(i([],r(this.rootNode.allLeafChildren),!1),r(p),!1);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),n.add=p}},e.prototype.executeRemove=function(e,t,r){var i=this,n=e.remove;if(!o._.missingOrEmpty(n)){var s={};n.forEach((function(e){var o=i.lookupRowNode(e);o&&(o.isSelected()&&r.push(o),o.clearRowTopAndRowIndex(),s[o.id]=!0,delete i.allNodesMap[o.id],t.remove.push(o))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter((function(e){return!s[e.id]})),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},e.prototype.executeUpdate=function(t,r,i){var n=this,s=t.update;o._.missingOrEmpty(s)||s.forEach((function(t){var o=n.lookupRowNode(t);o&&(o.updateData(t),!o.selectable&&o.isSelected()&&i.push(o),n.setMasterForRow(o,t,e.TOP_LEVEL,!1),r.update.push(o))}))},e.prototype.lookupRowNode=function(e){var t,o=this.gridOptionsService.getCallback("getRowId");if(o){var r=o({data:e,level:0});if(!(t=this.allNodesMap[r]))return console.error("AG Grid: could not find row id=".concat(r,", data item was not found for this id")),null}else if(!(t=this.rootNode.allLeafChildren.find((function(t){return t.data===e}))))return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return t||null},e.prototype.createNode=function(e,t,r){var i=new o.RowNode(this.beans);i.group=!1,this.setMasterForRow(i,e,r,!0);var n=this.gridOptionsService.get("suppressParentsInRowNodes");return t&&!n&&(i.parent=t),i.level=r,i.setDataAndId(e,this.nextId.toString()),this.allNodesMap[i.id]&&console.warn("AG Grid: duplicate node id '".concat(i.id,"' detected from getRowId callback, this could cause issues in your grid.")),this.allNodesMap[i.id]=i,this.nextId++,i},e.prototype.setMasterForRow=function(e,t,o,r){if(this.gridOptionsService.get("treeData"))e.setMaster(!1),r&&(e.expanded=!1);else{if(this.gridOptionsService.get("masterDetail")){var i=this.gridOptionsService.get("isRowMaster");i?e.setMaster(i(t)):e.setMaster(!0)}else e.setMaster(!1);if(r){var n=this.columnModel.getRowGroupColumns(),s=o+(n?n.length:0);e.expanded=!!e.master&&this.isExpanded(s)}}},e.prototype.isExpanded=function(e){var t=this.gridOptionsService.get("groupDefaultExpanded");return-1===t||e<t},e.TOP_LEVEL=0,e.ROOT_NODE_ID="ROOT_NODE_ID",e}(),s=(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),a=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},l=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,i,n=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}return s},d=function(e,t,o){if(o||2===arguments.length)for(var r,i=0,n=t.length;i<n;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){e[e.Normal=0]="Normal",e[e.AfterFilter=1]="AfterFilter",e[e.AfterFilterAndSort=2]="AfterFilterAndSort",e[e.PivotNodes=3]="PivotNodes"}(t||(t={}));var p=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRowHeightChanged_debounced=o._.debounce(t.onRowHeightChanged.bind(t),100),t.rowsToDisplay=[],t.hasStarted=!1,t.shouldSkipSettingDataOnStart=!1,t}return s(r,e),r.prototype.init=function(){var e=this,t=this.refreshModel.bind(this,{step:o.ClientSideRowModelSteps.EVERYTHING}),r=!this.gridOptionsService.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:o.ClientSideRowModelSteps.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:r});this.addManagedListener(this.eventService,o.Events.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,o.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,o.Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,o.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:o.ClientSideRowModelSteps.PIVOT})),this.addManagedListener(this.eventService,o.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,o.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,o.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,o.Events.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,o.Events.EVENT_GRID_READY,(function(){return e.onGridReady()})),this.addPropertyListeners(),this.rootNode=new o.RowNode(this.beans),this.nodeManager=new n(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)},r.prototype.addPropertyListeners=function(){var e=this,t=new Set(["treeData","masterDetail"]),r=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),n=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),a=new Set(["postSortRows","groupDisplayType","accentedSort"]),p=new Set([]),c=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),h=d(d(d(d(d(d(d(d(d([],l(t),!1),l(r),!1),l(i),!1),l(n),!1),l(n),!1),l(s),!1),l(a),!1),l(p),!1),l(c),!1);this.addManagedPropertyListeners(h,(function(l){var d,h=null===(d=l.changeSet)||void 0===d?void 0:d.properties;if(h){var u=function(e){return h.some((function(t){return e.has(t)}))};u(t)?e.setRowData(e.rootNode.allLeafChildren.map((function(e){return e.data}))):u(r)?e.refreshModel({step:o.ClientSideRowModelSteps.EVERYTHING}):u(i)?e.refreshModel({step:o.ClientSideRowModelSteps.FILTER}):u(n)?e.refreshModel({step:o.ClientSideRowModelSteps.PIVOT}):u(s)?e.refreshModel({step:o.ClientSideRowModelSteps.AGGREGATE}):u(a)?e.refreshModel({step:o.ClientSideRowModelSteps.SORT}):u(p)?e.refreshModel({step:o.ClientSideRowModelSteps.FILTER_AGGREGATES}):u(c)&&e.refreshModel({step:o.ClientSideRowModelSteps.MAP})}})),this.addManagedPropertyListener("rowHeight",(function(){return e.resetRowHeights()}))},r.prototype.start=function(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()},r.prototype.setInitialData=function(){var e=this.gridOptionsService.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))},r.prototype.ensureRowHeightsValid=function(e,t,o,r){var i,n=!1;do{i=!1;for(var s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(s,o),d=Math.min(a,r),p=l;p<=d;p++){var c=this.getRow(p);if(c.rowHeightEstimated){var h=this.gridOptionsService.getRowHeightForNode(c);c.setRowHeight(h.height),i=!0,n=!0}}i&&this.setRowTopAndRowIndex()}while(i);return n},r.prototype.setRowTopAndRowIndex=function(){for(var e=this.environment.getDefaultRowHeight(),t=0,o=new Set,r=this.gridOptionsService.isDomLayout("normal"),i=0;i<this.rowsToDisplay.length;i++){var n=this.rowsToDisplay[i];if(null!=n.id&&o.add(n.id),null==n.rowHeight){var s=this.gridOptionsService.getRowHeightForNode(n,r,e);n.setRowHeight(s.height,s.estimated)}n.setRowTop(t),n.setRowIndex(i),t+=n.rowHeight}return o},r.prototype.clearRowTopAndRowIndex=function(e,t){var o=e.isActive(),r=function(e){e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},i=function(e){if(r(e),r(e.detailNode),r(e.sibling),e.hasChildren()&&e.childrenAfterGroup){var t=-1==e.level;o&&!t&&!e.expanded||e.childrenAfterGroup.forEach(i)}};i(this.rootNode)},r.prototype.ensureRowsAtPixel=function(e,t,r){var i=this;void 0===r&&(r=0);var n=this.getRowIndexAtPixel(t),s=this.getRow(n),a=!this.gridOptionsService.get("suppressAnimationFrame");return s!==e[0]&&(e.forEach((function(e){o._.removeFromArray(i.rootNode.allLeafChildren,e)})),e.forEach((function(e,t){o._.insertIntoArray(i.rootNode.allLeafChildren,e,Math.max(n+r,0)+t)})),this.refreshModel({step:o.ClientSideRowModelSteps.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:a}),!0)},r.prototype.highlightRowAtPixel=function(e,t){var o=null!=t?this.getRowIndexAtPixel(t):null,r=null!=o?this.getRow(o):null;if(r&&e&&r!==e&&null!=t){var i=this.getHighlightPosition(t,r);this.lastHighlightedRow&&this.lastHighlightedRow!==r&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),r.setHighlighted(i),this.lastHighlightedRow=r}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},r.prototype.getHighlightPosition=function(e,t){if(!t){var r=this.getRowIndexAtPixel(e);if(!(t=this.getRow(r||0)))return o.RowHighlightPosition.Below}return e-t.rowTop<t.rowHeight/2?o.RowHighlightPosition.Above:o.RowHighlightPosition.Below},r.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},r.prototype.isLastRowIndexKnown=function(){return!0},r.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},r.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var e=this.rootNode.childrenAfterAggFilter;return e?e.length:0},r.prototype.getTopLevelRowDisplayedIndex=function(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;var t=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},r.prototype.getRowBounds=function(e){if(o._.missing(this.rowsToDisplay))return null;var t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null},r.prototype.onRowGroupOpened=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:o.ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate:e})},r.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var t=this.gridOptionsService.isAnimateRows(),r=0===e.columns.length||e.columns.some((function(e){return e.isPrimary()}))?o.ClientSideRowModelSteps.FILTER:o.ClientSideRowModelSteps.FILTER_AGGREGATES;this.refreshModel({step:r,keepRenderedRows:!0,animate:t})}},r.prototype.onSortChanged=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:o.ClientSideRowModelSteps.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},r.prototype.getType=function(){return"clientSide"},r.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:o.ClientSideRowModelSteps.PIVOT}):this.refreshModel({step:o.ClientSideRowModelSteps.AGGREGATE})},r.prototype.createChangePath=function(e){var t=o._.missingOrEmpty(e),r=new o.ChangedPath(!1,this.rootNode);return(t||this.gridOptionsService.get("treeData"))&&r.setInactive(),r},r.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==e.rowNodeTransactions)return!1;var t=e.rowNodeTransactions.filter((function(e){return null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0}));return null==t||0==t.length},r.prototype.buildRefreshModelParams=function(e){var t=o.ClientSideRowModelSteps.EVERYTHING,r={everything:o.ClientSideRowModelSteps.EVERYTHING,group:o.ClientSideRowModelSteps.EVERYTHING,filter:o.ClientSideRowModelSteps.FILTER,map:o.ClientSideRowModelSteps.MAP,aggregate:o.ClientSideRowModelSteps.AGGREGATE,sort:o.ClientSideRowModelSteps.SORT,pivot:o.ClientSideRowModelSteps.PIVOT};if(o._.exists(e)&&(t=r[e]),!o._.missing(t))return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsService.get("suppressAnimationFrame")};console.error("AG Grid: invalid step ".concat(e,", available steps are ").concat(Object.keys(r).join(", ")))},r.prototype.refreshModel=function(e){if(this.hasStarted){var t="object"==typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(t&&!this.isSuppressModelUpdateAfterUpdateTransaction(t)){var r=this.createChangePath(t.rowNodeTransactions);switch(t.step){case o.ClientSideRowModelSteps.EVERYTHING:this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,r,!!t.afterColumnsChanged);case o.ClientSideRowModelSteps.FILTER:this.doFilter(r);case o.ClientSideRowModelSteps.PIVOT:this.doPivot(r);case o.ClientSideRowModelSteps.AGGREGATE:this.doAggregate(r);case o.ClientSideRowModelSteps.FILTER_AGGREGATES:this.doFilterAggregates(r);case o.ClientSideRowModelSteps.SORT:this.doSort(t.rowNodeTransactions,r);case o.ClientSideRowModelSteps.MAP:this.doRowsToDisplay()}var i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(r,i);var n={type:o.Events.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(n)}}},r.prototype.isEmpty=function(){var e=o._.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return o._.missing(this.rootNode)||e||!this.columnModel.isReady()},r.prototype.isRowsToRender=function(){return o._.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},r.prototype.getNodesInRangeForSelection=function(e,t){var o=!t,r=!1,i=[],n=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort((function(s){if(!r)if(o&&(s===t||s===e)&&(r=!0,s.group&&n))i.push.apply(i,d([],l(s.allLeafChildren),!1));else{if(!o){if(s!==t&&s!==e)return;o=!0}(!s.group||!n)&&i.push(s)}})),i},r.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},r.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},r.prototype.getRootNode=function(){return this.rootNode},r.prototype.getRow=function(e){return this.rowsToDisplay[e]},r.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},r.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var t=0,r=this.rowsToDisplay.length-1;if(e<=0)return 0;if(o._.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;for(var i=-1,n=-1;;){var s=Math.floor((t+r)/2),a=this.rowsToDisplay[s];if(this.isRowInPixel(a,e))return s;if(a.rowTop<e?t=s+1:a.rowTop>e&&(r=s-1),i===t&&n===r)return s;i=t,n=r}},r.prototype.isRowInPixel=function(e,t){var o=e.rowTop,r=e.rowTop+e.rowHeight;return o<=t&&r>t},r.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((function(t,o){return e(t,o)}))},r.prototype.forEachNode=function(e,o){void 0===o&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:d([],l(this.rootNode.childrenAfterGroup||[]),!1),callback:e,recursionType:t.Normal,index:0,includeFooterNodes:o})},r.prototype.forEachNodeAfterFilter=function(e,o){void 0===o&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:d([],l(this.rootNode.childrenAfterAggFilter||[]),!1),callback:e,recursionType:t.AfterFilter,index:0,includeFooterNodes:o})},r.prototype.forEachNodeAfterFilterAndSort=function(e,o){void 0===o&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:d([],l(this.rootNode.childrenAfterSort||[]),!1),callback:e,recursionType:t.AfterFilterAndSort,index:0,includeFooterNodes:o})},r.prototype.forEachPivotNode=function(e,o){void 0===o&&(o=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:t.PivotNodes,index:0,includeFooterNodes:o})},r.prototype.recursivelyWalkNodesAndCallback=function(e){for(var o,r=e.nodes,i=e.callback,n=e.recursionType,s=e.includeFooterNodes,a=e.index,p=0;p<r.length;p++){var c=r[p];if(i(c,a++),c.hasChildren()&&!c.footer){var h=null;switch(n){case t.Normal:h=c.childrenAfterGroup;break;case t.AfterFilter:h=c.childrenAfterAggFilter;break;case t.AfterFilterAndSort:h=c.childrenAfterSort;break;case t.PivotNodes:h=c.leafGroup?null:c.childrenAfterSort}h&&(a=this.recursivelyWalkNodesAndCallback({nodes:d([],l(h),!1),callback:i,recursionType:n,index:a,includeFooterNodes:s}))}}var u=null===(o=r[0])||void 0===o?void 0:o.parent;if(!s||!u)return a;if(u===this.rootNode){if(!this.gridOptionsService.get("groupIncludeTotalFooter"))return a}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:u}))return a;return u.createFooter(),i(u.sibling,a++),a},r.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},r.prototype.doFilterAggregates=function(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},r.prototype.expandOrCollapseAll=function(e){var t=this.gridOptionsService.get("treeData"),r=this.columnModel.isPivotActive(),i=function(n){n&&n.forEach((function(n){var s=function(){n.expanded=e,i(n.childrenAfterGroup)};t?o._.exists(n.childrenAfterGroup)&&s():r?!n.leafGroup&&s():n.group&&s()}))};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:o.ClientSideRowModelSteps.MAP});var n=e?"expandAll":"collapseAll",s={type:o.Events.EVENT_EXPAND_COLLAPSE_ALL,source:n};this.eventService.dispatchEvent(s)},r.prototype.doSort=function(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})},r.prototype.doRowGrouping=function(e,t,r,i){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:r}):this.groupStage.execute({rowNode:this.rootNode,changedPath:r,afterColumnsChanged:i}),this.gridOptionsService.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",r)){var n={type:o.Events.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(n)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.eventService.dispatchEventOnce({type:o.Events.EVENT_ROW_COUNT_READY})},r.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},r.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},r.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},r.prototype.getRowNode=function(e){if("string"==typeof e&&0==e.indexOf(o.RowNode.ID_PREFIX_ROW_GROUP)){var t=void 0;return this.forEachNode((function(o){o.id===e&&(t=o)})),t}return this.nodeManager.getRowNode(e)},r.prototype.setRowData=function(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()},r.prototype.dispatchUpdateEventsAndRefresh=function(){var e={type:o.Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.refreshModel({step:o.ClientSideRowModelSteps.EVERYTHING,newData:!0})},r.prototype.batchUpdateRowData=function(e,t){var o=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var r=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout((function(){o.executeBatchUpdateRowData()}),r)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})},r.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},r.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var t=[],r=[],i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach((function(o){var n=e.nodeManager.updateRowData(o.rowDataTransaction,void 0);r.push(n),o.callback&&t.push(o.callback.bind(null,n)),"number"==typeof o.rowDataTransaction.addIndex&&(i=!0)})),this.commonUpdateRowData(r,void 0,i),t.length>0&&window.setTimeout((function(){t.forEach((function(e){return e()}))}),0),r.length>0){var n={type:o.Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:r};this.eventService.dispatchEvent(n)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},r.prototype.updateRowData=function(e,t){this.valueCache.onDataChanged();var o=this.nodeManager.updateRowData(e,t),r="number"==typeof e.addIndex;return this.commonUpdateRowData([o],t,r),o},r.prototype.createRowNodeOrder=function(){if(!this.gridOptionsService.get("suppressMaintainUnsortedOrder")){var e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var t=0;t<this.rootNode.allLeafChildren.length;t++){e[this.rootNode.allLeafChildren[t].id]=t}return e}},r.prototype.commonUpdateRowData=function(e,t,r){if(this.hasStarted){var i=!this.gridOptionsService.get("suppressAnimationFrame");r&&(t=this.createRowNodeOrder());var n={type:o.Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(n),this.refreshModel({step:o.ClientSideRowModelSteps.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}},r.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},r.prototype.onRowHeightChanged=function(){this.refreshModel({step:o.ClientSideRowModelSteps.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},r.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},r.prototype.resetRowHeights=function(){var e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()},r.prototype.resetRowHeightsForAllRowNodes=function(){var e=!1;return this.forEachNode((function(t){t.setRowHeight(t.rowHeight,!0);var o=t.detailNode;o&&o.setRowHeight(o.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e},r.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},r.prototype.onGridReady=function(){this.hasStarted||this.setInitialData()},r.prototype.isRowDataLoaded=function(){return this.nodeManager.hasData()},a([o.Autowired("columnModel")],r.prototype,"columnModel",void 0),a([o.Autowired("selectionService")],r.prototype,"selectionService",void 0),a([o.Autowired("filterManager")],r.prototype,"filterManager",void 0),a([o.Autowired("valueCache")],r.prototype,"valueCache",void 0),a([o.Autowired("beans")],r.prototype,"beans",void 0),a([o.Autowired("filterStage")],r.prototype,"filterStage",void 0),a([o.Autowired("sortStage")],r.prototype,"sortStage",void 0),a([o.Autowired("flattenStage")],r.prototype,"flattenStage",void 0),a([o.Optional("groupStage")],r.prototype,"groupStage",void 0),a([o.Optional("aggregationStage")],r.prototype,"aggregationStage",void 0),a([o.Optional("pivotStage")],r.prototype,"pivotStage",void 0),a([o.Optional("filterAggregatesStage")],r.prototype,"filterAggregatesStage",void 0),a([o.PostConstruct],r.prototype,"init",null),r=a([o.Bean("rowModel")],r)}(o.BeanStub),c=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),h=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.execute=function(e){var t=e.changedPath;this.filterService.filter(t)},h([o.Autowired("filterService")],t.prototype,"filterService",void 0),t=h([o.Bean("filterStage")],t)}(o.BeanStub),f=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),g=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.execute=function(e){var t=this,r=this.sortController.getSortOptions(),i=o._.exists(r)&&r.length>0,n=i&&o._.exists(e.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),s=r.some((function(e){return t.gridOptionsService.isColumnsSortingCoupledToGroup()?e.column.isPrimary()&&e.column.isRowGroupActive():!!e.column.getColDef().showRowGroup}));this.sortService.sort(r,i,n,e.rowNodeTransactions,e.changedPath,s)},g([o.Autowired("sortService")],t.prototype,"sortService",void 0),g([o.Autowired("sortController")],t.prototype,"sortController",void 0),t=g([o.Bean("sortStage")],t)}(o.BeanStub),w=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),y=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.execute=function(e){var t=e.rowNode,o=[],r=this.columnModel.isPivotMode(),i=r&&t.leafGroup,n=i?[t]:t.childrenAfterSort,s=this.getFlattenDetails();return this.recursivelyAddToRowsToDisplay(s,n,o,r,0),!i&&o.length>0&&s.groupIncludeTotalFooter&&(t.createFooter(),this.addRowNodeToRowsToDisplay(s,t.sibling,o,0)),o},t.prototype.getFlattenDetails=function(){var e=this.gridOptionsService.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gridOptionsService.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},t.prototype.recursivelyAddToRowsToDisplay=function(e,t,r,i,n){if(!o._.missingOrEmpty(t))for(var s=0;s<t.length;s++){var a=t[s],l=a.hasChildren(),d=i&&!l,p=e.groupRemoveSingleChildren&&l&&1===a.childrenAfterGroup.length,c=e.groupRemoveLowestSingleChildren&&l&&a.leafGroup&&1===a.childrenAfterGroup.length,h=i&&a.leafGroup,u=e.hideOpenParents&&a.expanded&&!a.master&&!h;if(!(d||u||p||c)&&this.addRowNodeToRowsToDisplay(e,a,r,n),!i||!a.leafGroup)if(l){var f=p||c;if(a.expanded||f){var g=f?n:n+1;this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,r,i,g),e.getGroupIncludeFooter({node:a})?(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,r,g)):a.destroyFooter()}}else if(a.master&&a.expanded){var v=this.createDetailNode(a);this.addRowNodeToRowsToDisplay(e,v,r,n)}}},t.prototype.addRowNodeToRowsToDisplay=function(e,t,o,r){o.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:r)},t.prototype.createDetailNode=function(e){if(o._.exists(e.detailNode))return e.detailNode;var t=new o.RowNode(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,o._.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t},y([o.Autowired("columnModel")],t.prototype,"columnModel",void 0),y([o.Autowired("beans")],t.prototype,"beans",void 0),t=y([o.Bean("flattenStage")],t)}(o.BeanStub),R=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),A=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),t.prototype.sort=function(e,t,o,r,i,n){var s=this,a=this.gridOptionsService.get("groupMaintainOrder"),l=this.columnModel.getAllGridColumns().some((function(e){return e.isRowGroupActive()})),d={};o&&r&&(d=this.calculateDirtyNodes(r));var p=this.columnModel.isPivotMode(),c=this.gridOptionsService.getCallback("postSortRows");i&&i.forEachChangedNodeDepthFirst((function(r){s.pullDownGroupDataForHideOpenParents(r.childrenAfterAggFilter,!0);var h=p&&r.leafGroup;if(a&&l&&!r.leafGroup&&!n){var u=r.childrenAfterAggFilter.slice(0);if(r.childrenAfterSort){var f={};r.childrenAfterSort.forEach((function(e,t){f[e.id]=t})),u.sort((function(e,t){var o,r;return(null!==(o=f[e.id])&&void 0!==o?o:0)-(null!==(r=f[t.id])&&void 0!==r?r:0)}))}r.childrenAfterSort=u}else r.childrenAfterSort=!t||h?r.childrenAfterAggFilter.slice(0):o?s.doDeltaSort(r,d,i,e):s.rowNodeSorter.doFullSort(r.childrenAfterAggFilter,e);if(r.sibling&&(r.sibling.childrenAfterSort=r.childrenAfterSort),s.updateChildIndexes(r),c){var g={nodes:r.childrenAfterSort};c(g)}})),this.updateGroupDataForHideOpenParents(i)},t.prototype.calculateDirtyNodes=function(e){var t={},o=function(e){e&&e.forEach((function(e){return t[e.id]=!0}))};return e&&e.forEach((function(e){o(e.add),o(e.update),o(e.remove)})),t},t.prototype.doDeltaSort=function(e,t,o,r){var i=this,n=e.childrenAfterAggFilter,s=e.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(n,r);var a={},l=[];n.forEach((function(e){t[e.id]||!o.canSkip(e)?l.push(e):a[e.id]=!0}));var d=s.filter((function(e){return a[e.id]})),p=function(e,t){return{currentPos:t,rowNode:e}},c=l.map(p).sort((function(e,t){return i.rowNodeSorter.compareRowNodes(r,e,t)}));return this.mergeSortedArrays(r,c,d.map(p)).map((function(e){return e.rowNode}))},t.prototype.mergeSortedArrays=function(e,t,o){for(var r=[],i=0,n=0;i<t.length&&n<o.length;){this.rowNodeSorter.compareRowNodes(e,t[i],o[n])<0?r.push(t[i++]):r.push(o[n++])}for(;i<t.length;)r.push(t[i++]);for(;n<o.length;)r.push(o[n++]);return r},t.prototype.updateChildIndexes=function(e){if(!o._.missing(e.childrenAfterSort))for(var t=e.childrenAfterSort,r=0;r<t.length;r++){var i=t[r],n=0===r,s=r===e.childrenAfterSort.length-1;i.setFirstChild(n),i.setLastChild(s),i.setChildIndex(r)}},t.prototype.updateGroupDataForHideOpenParents=function(e){var t=this;if(this.gridOptionsService.get("groupHideOpenParents")){if(this.gridOptionsService.get("treeData"))return o._.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;var r=function(e){t.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach((function(e){e.hasChildren()&&r(e)}))};e&&e.executeFromRootNode((function(e){return r(e)}))}},t.prototype.pullDownGroupDataForHideOpenParents=function(e,t){var r=this;this.gridOptionsService.get("groupHideOpenParents")&&!o._.missing(e)&&e.forEach((function(e){r.columnModel.getGroupDisplayColumns().forEach((function(o){var i=o.getColDef().showRowGroup;if("string"==typeof i){var n=i,s=r.columnModel.getPrimaryColumn(n);if(!(s===e.rowGroupColumn))if(t)e.setGroupValue(o.getId(),void 0);else{var a=e.getFirstChildOfFirstChild(s);a&&e.setGroupValue(o.getId(),a.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")}))}))},A([o.Autowired("columnModel")],t.prototype,"columnModel",void 0),A([o.Autowired("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),t=A([o.Bean("sortService")],t)}(o.BeanStub),O=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),T=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.filter=function(e){var t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)},t.prototype.filterNodes=function(e,t){var o=this,r=function(t,r){t.hasChildren()?t.childrenAfterFilter=e&&!r?t.childrenAfterGroup.filter((function(e){var t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,r=e.data&&o.filterManager.doesRowPassFilter({rowNode:e});return t||r})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var i=function(e,t){if(e.childrenAfterGroup)for(var n=0;n<e.childrenAfterGroup.length;n++){var s=e.childrenAfterGroup[n],a=t||o.filterManager.doesRowPassFilter({rowNode:s});s.childrenAfterGroup?i(e.childrenAfterGroup[n],a):r(s,a)}r(e,t)};t.executeFromRootNode((function(e){return i(e,!1)}))}else{t.forEachChangedNodeDepthFirst((function(e){return r(e,!1)}),!0)}},t.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")},T([o.Autowired("filterManager")],t.prototype,"filterManager",void 0),t=T([o.Bean("filterService")],t)}(o.BeanStub),C=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),m=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},D=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,i,n=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}return s},M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.postConstruct=function(){var e=this;"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",(function(){return e.onRowDataUpdated()})))},t.prototype.isActive=function(){var e=this.gridOptionsService.exists("getRowId");return!this.gridOptionsService.get("resetRowDataOnUpdate")&&e},t.prototype.setRowData=function(e){var t=this.createTransactionForRowData(e);if(t){var o=D(t,2),r=o[0],i=o[1];this.clientSideRowModel.updateRowData(r,i)}},t.prototype.createTransactionForRowData=function(e){if(o._.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var t=this.gridOptionsService.getCallback("getRowId");if(null!=t){var r={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gridOptionsService.get("suppressMaintainUnsortedOrder")?void 0:{};return o._.exists(e)&&e.forEach((function(e,o){var s=t({data:e,level:0}),a=i[s];(n&&(n[s]=o),a)?(a.data!==e&&r.update.push(e),i[s]=void 0):r.add.push(e)})),o._.iterateObject(i,(function(e,t){t&&r.remove.push(t.data)})),[r,n]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},t.prototype.onRowDataUpdated=function(){var e=this.gridOptionsService.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))},m([o.Autowired("rowModel")],t.prototype,"rowModel",void 0),m([o.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),m([o.Autowired("selectionService")],t.prototype,"selectionService",void 0),m([o.PostConstruct],t.prototype,"postConstruct",null),t=m([o.Bean("immutableService")],t)}(o.BeanStub),_={version:"31.0.0",moduleName:o.ModuleNames.ClientSideRowModelModule,rowModel:"clientSide",beans:[p,u,v,S,N,E,M]};exports.ClientSideRowModelModule=_;