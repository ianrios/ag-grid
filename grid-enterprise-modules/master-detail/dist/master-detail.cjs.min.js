/**
          * @ag-grid-enterprise/master-detail - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/master-detail - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@ag-grid-community/core"),r=require("@ag-grid-enterprise/core"),i=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}),o=function(){return(o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},s=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadRowDataVersion=0,t}return i(r,e),r.prototype.init=function(e,r){this.params=r,this.comp=e,null!=r.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,t.Events.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},r.prototype.onFullWidthRowFocused=function(e){var t=this.params,r={rowIndex:t.node.rowIndex,rowPinned:t.node.rowPinned},i={rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.rowPositionUtils.sameRow(r,i)&&this.focusService.focusInto(this.comp.getGui(),e.fromBelow)},r.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsService.get("detailRowAutoHeight"),t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",r=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(t,!0),this.comp.addOrRemoveDetailGridCssClass(r,!0)},r.prototype.setupRefreshStrategy=function(){var e=this.params.refreshStrategy;"everything"==e||"nothing"==e||"rows"==e?this.refreshStrategy=e:(null!=e&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},r.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)},r.prototype.createDetailGrid=function(){if(t._.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var e=this.gridOptionsService.get("detailRowAutoHeight"),r=o({},this.params.detailGridOptions);e&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)}},r.prototype.registerDetailWithMaster=function(e,t){var r=this.params.node.id,i=this.params.api,o={id:r,api:e,columnApi:t},a=this.params.node;i.addDetailGridInfo(r,o),a.detailGridInfo=o,this.addDestroyFunc((function(){a.detailGridInfo===o&&(i.removeDetailGridInfo(r),a.detailGridInfo=null)}))},r.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var t=this.loadRowDataVersion,r=this.params.getDetailRowData;if(r){r({node:this.params.node,data:this.params.node.data,successCallback:function(r){e.loadRowDataVersion===t&&e.comp.setRowData(r)},context:this.gridOptionsService.context})}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},r.prototype.refresh=function(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0},a([t.Autowired("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),a([t.Autowired("focusService")],r.prototype,"focusService",void 0),r}(t.BeanStub),n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),l=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},d=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.init=function(e){var t=this;this.params=e,this.selectAndSetTemplate();var r={addOrRemoveCssClass:function(e,r){return t.addOrRemoveCssClass(e,r)},addOrRemoveDetailGridCssClass:function(e,r){return t.eDetailGrid.classList.toggle(e,r)},setDetailGrid:function(e){return t.setDetailGrid(e)},setRowData:function(e){return t.setRowData(e)},getGui:function(){return t.eDetailGrid}};this.ctrl=this.createManagedBean(new s),this.ctrl.init(r,e)},r.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},r.prototype.destroy=function(){e.prototype.destroy.call(this)},r.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var i=function(){e.setTemplate(r.TEMPLATE)};if(t._.missing(this.params.template))i();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var o=(0,this.params.template)(this.params);this.setTemplate(o)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),i();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},r.prototype.setDetailGrid=function(e){if(this.eDetailGrid){var r=this.context.getBean("agGridReact"),i=r?t._.cloneObject(r):void 0,o=this.context.getBean("frameworkComponentWrapper"),a=this.getFrameworkOverrides(),s=t.createGrid(this.eDetailGrid,e,{frameworkOverrides:a,providedBeanInstances:{agGridReact:i,frameworkComponentWrapper:o},modules:t.ModuleRegistry.__getGridRegisteredModules(this.params.api.getGridId())});this.detailApi=s,this.ctrl.registerDetailWithMaster(s,new t.ColumnApi(s)),this.addDestroyFunc((function(){null==s||s.destroy()}))}},r.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setGridOption("rowData",e)},r.TEMPLATE='<div class="ag-details-row" role="gridcell">\n            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n        </div>',l([t.RefSelector("eDetailGrid")],r.prototype,"eDetailGrid",void 0),r}(t.Component),p={version:"31.0.0",moduleName:t.ModuleNames.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:d}],controllers:[{controllerName:"detailCellRenderer",controllerClass:s}],dependantModules:[r.EnterpriseCoreModule]};exports.MasterDetailModule=p;