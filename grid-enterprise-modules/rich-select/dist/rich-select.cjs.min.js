/**
          * @ag-grid-enterprise/rich-select - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/rich-select - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@ag-grid-community/core"),i=require("@ag-grid-enterprise/core"),r=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}),a=function(e){function i(){return e.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return r(i,e),i.prototype.init=function(e){var i=this;this.params=e;var r=e.cellStartedEdit,a=e.cellHeight,o=e.values;t._.missing(o)&&console.warn("AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set");var c=this.buildRichSelectParams(),n=c.params,l=c.valuesPromise;this.richSelect=this.createManagedBean(new t.AgRichSelect(n)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),l&&l.then((function(e){i.richSelect.setValueList({valueList:e,refresh:!0});var t=i.getSearchStringCallback(e);t&&i.richSelect.setSearchStringCreator(t)})),this.addManagedListener(this.richSelect,t.Events.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=r,t._.exists(a)&&this.richSelect.setRowHeight(a)},i.prototype.onEditorPickerValueSelected=function(e){this.params.stopEditing(!e.fromEnterKey)},i.prototype.onEditorFocusOut=function(e){this.richSelect.getGui().contains(e.relatedTarget)||this.params.stopEditing(!0)},i.prototype.buildRichSelectParams=function(){var e,t,i=this.params,r=i.cellRenderer,a=i.value,o=i.values,c=i.formatValue,n=i.searchDebounceDelay,l=i.valueListGap,s=i.valueListMaxHeight,u=i.valueListMaxWidth,h=i.allowTyping,p=i.filterList,d=i.searchType,g=i.highlightMatch,f=i.valuePlaceholder,m=i.eventKey,v={value:a,cellRenderer:r,searchDebounceDelay:n,valueFormatter:c,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:l,allowTyping:h,filterList:p,searchType:d,highlightMatch:g,maxPickerHeight:s,maxPickerWidth:u,placeholder:f,initialInputValue:1===(null==m?void 0:m.length)?m:void 0};return e="function"==typeof o?o(this.params):null!=o?o:[],Array.isArray(e)?(v.valueList=e,v.searchStringCreator=this.getSearchStringCallback(e)):t=e,{params:v,valuesPromise:t}},i.prototype.getSearchStringCallback=function(e){var t=this,i=this.params.colDef;if("object"==typeof e[0]&&i.keyCreator)return function(e){return e.map((function(e){var r={value:e,colDef:t.params.colDef,column:t.params.column,node:t.params.node,data:t.params.data,api:t.gridOptionsService.api,columnApi:t.gridOptionsService.columnApi,context:t.gridOptionsService.context};return i.keyCreator(r)}))}},i.prototype.afterGuiAttached=function(){var e=this,t=this.focusAfterAttached,i=this.params;setTimeout((function(){if(e.isAlive()){if(t){var r=e.richSelect.getFocusableElement();r.focus();var a=e.params,o=a.allowTyping,c=a.eventKey;!o||c&&1===c.length||r.select()}e.richSelect.showPicker();var n=i.eventKey;n&&1===(null==n?void 0:n.length)&&e.richSelect.searchTextFromString(n)}}))},i.prototype.getValue=function(){return this.richSelect.getValue()},i.prototype.isPopup=function(){return!1},i}(t.PopupComponent),o={version:"31.0.0",moduleName:t.ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:a},{componentName:"agRichSelectCellEditor",componentClass:a}],dependantModules:[i.EnterpriseCoreModule]};exports.RichSelectModule=o;